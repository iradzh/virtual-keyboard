(()=>{"use strict";window.onload=function(){(function(){document.body.classList.add("body");const e=document.createElement("h1");e.classList.add("title"),e.innerText="Virtual Keyboard for MacOS";const t=document.createElement("textarea");t.classList.add("text-area"),t.cols="100",t.rows="13";const a=document.createElement("a");a.classList.add("link"),a.href="https://www.apple.com/shop/product/MK2A3LL/A/magic-keyboard-us-english?fnode=33db5e2a4dcec81505650aaabeb76d82708583efe21d8df8b43b2913b0b874e2dccb932b611e378268911834fd1ce8fe062e4f0209bead386e6edcb9952ef3fe15381154f904b73b7db34a95b0e8c7675c099411f64730be77b8381422cf0624fb6f0756abb36f1d1d54483f581545b6",a.textContent="Keyboard reference";const d=document.createElement("div");d.classList.add("keyboard-container"),document.body.appendChild(e),document.body.appendChild(t),document.body.appendChild(d),document.body.appendChild(a)})(),fetch("./assets/keys.json").then((e=>e.json())).then((e=>{!function(e){const t=document.querySelector(".keyboard-container");e.forEach((e=>{const a=document.createElement("button");""===e.keyENG?a.innerText="Â ":a.innerText=e.keyENG,a.style.width=e.width,a.setAttribute("data-code",e.code),a.classList.add("key"),a.addEventListener("click",(t=>{const a=t.target.getAttribute("data-code"),d=document.querySelector(".text-area");"Space"===a?d.value+=" ":"Backspace"===a?d.value=d.value.slice(0,-1):"Enter"===a?d.value+="\n":"Tab"===a?d.value+="  ":"ShiftLeft"===a||"ShiftRight"===a||"CapsLock"===a||"ControlLeft"===a||"Fn"===a||"ControlRight"===a||"AltLeft"===a||"AltRight"===a||"MetaLeft"===a||"MetaRight"===a?d.value+="":e&&(d.value+=e.keyENG)})),t.appendChild(a)}))}(e),document.addEventListener("keydown",(e=>{e.preventDefault();const t=e.code,a=document.querySelectorAll(".key"),d=Array.from(a).find((e=>e.getAttribute("data-code")===t)),c=document.querySelector(".text-area");d&&("Backspace"===d.getAttribute("data-code")?c.value=c.value.slice(0,-1):"Enter"===d.getAttribute("data-code")?c.value+="\n":"Space"===d.getAttribute("data-code")?c.value+=" ":"Tab"===d.getAttribute("data-code")?c.value+="  ":"CapsLock"===d.getAttribute("data-code")||"ShiftLeft"===d.getAttribute("data-code")||"ShiftRight"===d.getAttribute("data-code")||"ControlLeft"===d.getAttribute("data-code")||"ControlRight"===d.getAttribute("data-code")||"MetaLeft"===d.getAttribute("data-code")||"MetaRight"===d.getAttribute("data-code")||"AltLeft"===d.getAttribute("data-code")||"AltRight"===d.getAttribute("data-code")||e.metaKey||e.ctrlKey?c.value+="":c.value+=d.innerText,d.classList.add("active"))})),document.addEventListener("keyup",(e=>{const t=e.code,a=document.querySelectorAll(".key"),d=Array.from(a).find((e=>e.getAttribute("data-code")===t));d&&d.classList.remove("active")}))}))}})();